(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(i,r,e){i.exports={main:"chess_main__3oZk0",board:"chess_board__2cCVC",square:"chess_square__3QoMx",squareWithoutBorder:"chess_squareWithoutBorder__2GTjJ",figures:"chess_figures__2hib4"}},46:function(i,r,e){i.exports=e(60)},55:function(i,r,e){},60:function(i,r,e){"use strict";e.r(r);var n=e(0),t=e.n(n),a=e(38),o=e.n(a),u=(e(55),e(20)),c=e(5),j=e(79),f=e(77),l=e(21),s=e.n(l),g=e(11);var p=e(22),m=e(23),h={brown:"#72371C",white:"#FFE9C5",red:p.a[400],green:m.a[200]},w=function(i,r){return i%2===0?r%2===0?h.brown:h.white:r%2===0?h.white:h.brown},b={whitePawn:{steps:[[{i:-1,j:0}]],attackWhite:[[{i:-1,j:-1}],[{i:-1,j:1}]],attack:[{i:-1,j:-1},{i:-1,j:1}],initial:[{i:-2,j:0}]},whiteRook:{steps:[new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j+r}})]},whiteHorse:{steps:[[{i:-1,j:-2}],[{i:1,j:-2}],[{i:-1,j:2}],[{i:1,j:2}],[{i:-2,j:-1}],[{i:-2,j:1}],[{i:2,j:-1}],[{i:2,j:1}]]},whiteBishop:{steps:[new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j+r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j+r}})]},whiteKing:{steps:[[{i:-1,j:-1}],[{i:-1,j:0}],[{i:-1,j:1}],[{i:0,j:-1,rotateJ:-2}],[{i:0,j:0}],[{i:0,j:1,rotateJ:2}],[{i:1,j:-1}],[{i:1,j:0}],[{i:1,j:1}]]},whiteQueen:{steps:[new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j+r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j+r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j+r}})]},blackPawn:{steps:[[{i:1,j:0}]],attackBlack:[[{i:1,j:-1}],[{i:1,j:1}]],attack:[{i:1,j:-1},{i:1,j:1}],initial:[{i:2,j:0}]},blackRook:{steps:[new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j+r}})]},blackHorse:{steps:[[{i:-1,j:-2}],[{i:1,j:-2}],[{i:-1,j:2}],[{i:1,j:2}],[{i:-2,j:-1}],[{i:-2,j:1}],[{i:2,j:-1}],[{i:2,j:1}]],initial:[{i:0,j:3},{i:0,j:-2}]},blackBishop:{steps:[new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j+r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j+r}})]},blackKing:{steps:[[{i:-1,j:-1}],[{i:-1,j:0}],[{i:-1,j:1}],[{i:0,j:-1,rotateJ:-2}],[{i:0,j:0}],[{i:0,j:1,rotateJ:2}],[{i:1,j:-1}],[{i:1,j:0}],[{i:1,j:1}],[{i:0,j:0,rotateI:0,rotateJ:3},{i:0,j:0,rotateI:0,rotateJ:-2}]]},blackQueen:{steps:[new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j+r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j+r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j+r}})]}},d={Pawn:{steps:[[{i:-1,j:0}]],attackWhite:[[{i:-1,j:-1}],[{i:-1,j:1}]],attackBlack:[[{i:1,j:-1}],[{i:1,j:1}]],initial:[{i:-2,j:0}]},Rook:{steps:[new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j+r}})],blockers:["Horse","Bishop","Pawn","King"]},Horse:{steps:[[{i:-1,j:-2}],[{i:1,j:-2}],[{i:-1,j:2}],[{i:1,j:2}],[{i:-2,j:-1}],[{i:-2,j:1}],[{i:2,j:-1}],[{i:2,j:1}]]},Bishop:{steps:[new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j+r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j+r}})],blockers:["Horse","Rook","Pawn","King"]},King:{steps:[[{i:-1,j:-1}],[{i:-1,j:0}],[{i:-1,j:1}],[{i:0,j:-1}],[{i:0,j:0}],[{i:0,j:1}],[{i:1,j:-1}],[{i:1,j:0}],[{i:1,j:1}]]},Queen:{steps:[new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j+r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j+r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i-r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i+r,j:i.j}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j-r}}),new Array(8).fill({i:0,j:0}).map(function(i,r){return{i:i.i,j:i.j+r}})],blockers:["Horse","Pawn","King"]}},v=e(16),k=e.n(v),y=function(i,r,e,t){var a=Object(n.useState)(),o=Object(c.a)(a,2),j=o[0],f=o[1],l=Object(n.useState)({data:null,i:null,j:null}),s=Object(c.a)(l,2),p=s[0],m=s[1],v=Object(n.useState)("white"),y=Object(c.a)(v,2),C=y[0],A=y[1],N=Object(n.useState)(),O=Object(c.a)(N,2),E=O[0],_=O[1],P=Object(n.useState)(void 0),I=Object(c.a)(P,2),B=I[0],F=I[1],D=function(i){var r=Object(n.useRef)();return Object(n.useEffect)(function(){r.current=i},[i]),r.current}(p),q=function(i){if(i)return"white"===i?"black":"white"},K=function(i,r){var e={i:-1,j:-1};return i.forEach(function(i,n){i.forEach(function(i,t){"King"===i.figureName&&i.figureColor===r&&(e.i=n,e.j=t)})}),e},M=function(i,r,e){var n,t=e||K(i,r),a=t.i,o=t.j;return Object.entries(d).forEach(function(e){for(var u=Object(c.a)(e,2),j=u[0],f=u[1],l=f.steps,s=f.blockers,g=f.attackWhite,p=f.attackBlack,m=g||p?"white"===r?p:g:l,h=!1,w=0;w<m.length;w++){for(var b=[],d=0;d<m[w].length;d++)if(m[w][d].i||m[w][d].j){var v=a+m[w][d].i,k=o+m[w][d].j;if("Pawn"===j&&(v=a-m[w][d].i,k=o+m[w][d].j),i[v]&&i[v][k]){if(b.push({i:v,j:k}),"Queen"===j){var y=m[w][d-1]?d-1:d+1;m[w][d].i===m[w][y].i||m[w][d].j===m[w][y].j?s.push("Bishop"):m[w][d].i===m[w][y].i&&m[w][d].j===m[w][y].j||s.push("Rook")}if(i[v]&&i[v][k]&&(i[v][k].figureColor===r||s&&s.includes(i[v][k].figureName||"")&&i[v][k].figureColor===q(r))){b=[];break}if(i[v]&&i[v][k]&&i[v][k].figureName===j){n={color:r,kingCoords:t,isCheck:!0,checkDirection:b},h=!0;break}}}if(h)break}}),n},R=function(i,r,e,n){var t=k.a.cloneDeep(i);if("number"===typeof r.i&&"number"===typeof r.j)return r.data&&"King"===r.data.figureName&&r.data.isFirstMove&&(n===r.j+2||n===r.j-2)&&(t=function(i,r,e,n){return"number"===typeof r.i&&"number"===typeof r.j&&(n>r.j?(i[e][n-1]=Object(u.a)({},i[e][n-1],i[r.i][r.j+4],{color:w(e,n-1),isFirstMove:!1}),i[r.i][r.j+4]={color:w(r.i,r.j+4)}):(i[e][n+1]=Object(u.a)({},i[e][n+1],i[r.i][r.j-3],{color:w(e,n+1),isFirstMove:!1}),i[r.i][r.j-3]={color:w(r.i,r.j-3)}),i[e][n]=Object(u.a)({},i[e][n],r.data,{color:w(e,n),isFirstMove:!1}),i[r.i][r.j]={color:w(r.i,r.j)}),i}(t,r,e,n)),(r.data&&"Pawn"===r.data.figureName&&(n===r.j+1||n===r.j-1)&&i[r.i][r.j-1]&&"Pawn"===i[r.i][r.j-1].figureName||i[r.i][r.j+1]&&"Pawn"===i[r.i][r.j+1].figureName)&&(t=function(i,r,e,n){if(!r.data)return i;var t="white"===r.data.figureColor?1:-1;return i[e+t][n]={color:w(e+t,n)},i}(t,r,e,n)),t[e][n]=Object(u.a)({},t[e][n],r.data,{color:w(e,n),isFirstMove:!1}),t[r.i][r.j]={color:w(r.i,r.j)},S(r,i).forEach(function(i){t=x(i.i,i.j,w(i.i,i.j),t)}),t},H=function(i,r,e,n){return n[r][e].figureColor!==i},J=function(i,r,e,n){return n[r][e].figureColor===i},Q=function(i,r,e){return!!e[i][r].figureColor},S=function(i,r){var n=[];if(!i||!i.data)return[];var t=i.data,a=t.figureColor,o=t.figureName;if(!a||!o)return[];var u=b["".concat(a).concat(o)],c=u.steps,f=!1;if("number"===typeof i.i&&"number"===typeof i.j){for(var l=0;l<c.length;l++)for(var s=0;s<c[l].length;s++)if(c[l][s].i||c[l][s].j){var p=i.i+c[l][s].i,m=i.j+c[l][s].j;if(r[p]&&r[p][m])if(Q(p,m,r)){if(H(a,p,m,r)){!u.attack&&n.push({i:p,j:m}),f=!0;break}if(J(a,p,m,r)){f=!0;break}}else n.push({i:p,j:m})}if(i&&i.data&&i.data.isFirstMove&&!f&&u.initial)for(var h=0;h<u.initial.length;h++){var w=i.i+u.initial[h].i,d=i.j+u.initial[h].j;if(!r[w]||!r[w][d]||Q(w,d,r))break;n.push({i:w,j:d})}if(u.attack)for(var v=0;v<u.attack.length;v++){var y=i.i+u.attack[v].i,C=i.j+u.attack[v].j;r[y]&&r[y][C]&&Q(y,C,r)&&H(a,y,C,r)&&n.push({i:y,j:C})}}if(null!==i.i&&null!==i.j&&i.data&&"Pawn"===i.data.figureName&&i.data.figureColor&&e&&e[e.length-2])for(var A=[{i:i.i,j:i.j-1},{i:i.i,j:i.j+1}],N="white"===i.data.figureColor?-2:2,O="white"===i.data.figureColor?-1:1,E=0;E<A.length;E++){var _=e[e.length-2][A[E].i+N]&&e[e.length-2][A[E].i+N][A[E].j];r[A[E].i][A[E].j]&&"Pawn"===r[A[E].i][A[E].j].figureName&&r[A[E].i][A[E].j].figureColor!==i.data.figureColor&&_&&"Pawn"===_.figureName&&_.figureColor===q(i.data.figureColor)&&n.push({i:i.i+O,j:A[E].j})}if(i.data&&"King"===i.data.figureName){var P=[];n.forEach(function(e){if(i.data&&i.data.figureColor){var n=M(r,i.data.figureColor,e),t=n&&n.kingCoords;t&&P.push(t)}});var I=[];if([].concat(P,n).forEach(function(i,r,e){var n=e.findIndex(function(e,n){if(r<n&&k.a.isEqual(e,i))return k.a.isEqual(e,i)});-1===n?I.push(i):e.splice(n,1)}),i.data.isFirstMove&&i.data.figureColor&&"number"===typeof i.i&&"number"===typeof i.j){var B=W(r,i.data.figureColor,i.i,i.j);I.push.apply(I,B)}return I}if(j&&j.isCheck){var F=j.checkDirection,D=[];return[].concat(Object(g.a)(F),n).forEach(function(i,r,e){e.find(function(e,n){if(r>n)return k.a.isEqual(e,i)})&&D.push(i)}),D}if(i.data.figureColor&&i.i&&i.j){var K=M(r,i.data.figureColor,{i:i.i,j:i.j});if(K){for(var R=r[K.checkDirection[0].i][K.checkDirection[0].j],S=i.i-K.checkDirection[0].i,x=i.j-K.checkDirection[0].j,T=1;R&&"".concat(R.figureColor).concat(R.figureName)!=="".concat(i.data.figureColor,"King")&&(R=r[K.checkDirection[0].i+S*T]&&r[K.checkDirection[0].i+S*T][K.checkDirection[0].j+x*T],T++,!R||!R.figureColor||"".concat(R.figureColor).concat(R.figureName)==="".concat(i.data.figureColor).concat(i.data.figureName)););if(R&&"King"===R.figureName){var L=[];return[].concat(Object(g.a)(K.checkDirection),n).forEach(function(i,r,e){e.find(function(e,n){if(r>n)return k.a.isEqual(e,i)})&&L.push(i)}),L}}}return n},x=function(i,r,e,n){if(!n)return[];var t=k.a.cloneDeep(n);return t[i][r].color=e,t},W=function(i,r,e,n){for(var t=[[{i:e,j:n-1},{i:e,j:n-2}],[{i:e,j:n+1},{i:e,j:n+2},{i:e,j:n+3}]],a=[[],[]],o=0;o<t.length;o++)for(var u=0;u<t[o].length;u++){var c=t[o][u],j=c.i,f=c.j,l=Q(j,f,i),s=M(i,r,{i:j,j:f});a[o].push(!l&&!s)}var g=[];return a.forEach(function(r,a){var o=0===a?i[e][n-3]:i[e][n+4];r.every(function(i){return i})&&o.isFirstMove&&g.push(t[a][1])}),g};return Object(n.useEffect)(function(){var e=i;D&&"number"===typeof D.i&&"number"===typeof D.j&&(e=x(D.i,D.j,w(D.i,D.j),e),D.data&&D.data.figureName&&S(D,e).forEach(function(i){e=x(i.i,i.j,w(i.i,i.j),e)}));"number"===typeof p.i&&"number"===typeof p.j&&p.data&&p.data.figureName&&(e=x(p.i,p.j,h.green,e),S(p,e).forEach(function(i){e=x(i.i,i.j,h.green,e)}));!k.a.isEqual(e,i)&&e.length&&r(e)},[p,D]),Object(n.useEffect)(function(){if(j&&j.isCheck){var e=x(j.kingCoords.i,j.kingCoords.j,h.red,i);r(e),function(i,r,e){for(var n=K(i,e),t=S({data:i[n.i][n.j],i:n.i,j:n.j},i),a=0;a<i.length;a++)for(var o=0;o<i[a].length;o++)if(i[a][o].figureName){var u=S({data:i[a][o],i:a,j:o},i);if(u.length){var c=function(){var i=[];if([].concat(Object(g.a)(r),u,t).forEach(function(r,e,n){n.find(function(i,n){if(e>n)return k.a.isEqual(i,r)})&&i.push(r)}),i.length)return{v:void 0}}();if("object"===typeof c)return c.v}}_(q(e))}(i,j.checkDirection,C)}else{var n=K(i,q(C)),t=n.i,a=n.j;if(t>-1&&a>-1){var o=x(t,a,w(t,a),i);r(o)}}},[j]),{handleBoxClick:function(i,n,a,o){if(!i||i.color!==h.green||n===p.i&&a===p.j)i&&i.figureColor===C&&m({data:i,i:n,j:a});else if("number"===typeof n&&"number"===typeof a){var u=R(o,p,n,a);if(D&&D.data&&"Pawn"===D.data.figureName&&(0===n||7===n)&&F({i:n,j:a,color:C}),u&&u.length){var c=q(C);if(r(u),t([].concat(Object(g.a)(e),[u])),m({data:null,i:null,j:null}),c){A(c);var j=M(u,c);f(j)}}}},checkmate:E,chooseFigure:B,handleChooseFigure:function(i,n,a,o){console.log(i,n,a,o);var c=k.a.cloneDeep(o);if(c[n][a]=Object(u.a)({},c[n][a],i),r(c),F(void 0),t([].concat(Object(g.a)(e),[c])),m({data:null,i:null,j:null}),C){A(C);var j=M(c,C);f(j)}}}},C=function(){var i=Object(n.useState)(new Array(8).fill(new Array(8).fill({}))),r=Object(c.a)(i,2),e=r[0],t=r[1],a=Object(n.useCallback)(function(i){return i.map(function(i,r){return i.map(function(i,e){return o(r,e)})})},[]),o=Object(n.useCallback)(function(i,r){var e={},n=i<3?"black":"white";return 1===i&&(e={figureImg:"Pawn_Black.png",figureName:"Pawn",figureColor:"black"}),6===i&&(e={figureImg:"Pawn_White.png",figureName:"Pawn",figureColor:"white"}),0!==i&&7!==i||(0!==r&&7!==r||(e={figureImg:"Rook_".concat(n,".png"),figureName:"Rook",figureColor:n}),1!==r&&6!==r||(e={figureImg:"Horse_".concat(n,".png"),figureName:"Horse",figureColor:n}),2!==r&&5!==r||(e={figureImg:"Bishop_".concat(n,".png"),figureName:"Bishop",figureColor:n}),3===r&&(e={figureImg:"King_".concat(n,".png"),figureName:"King",figureColor:n}),4===r&&(e={figureImg:"Queen_".concat(n,".png"),figureName:"Queen",figureColor:n})),e.color=w(i,r),e.isFirstMove=!0,e},[]);return Object(n.useEffect)(function(){var i=a(e);t(i)},[]),[e,t]},A=function(){var i=Object(n.useState)([]),r=Object(c.a)(i,2);return[r[0],r[1]]};function N(){var i=C(),r=Object(c.a)(i,2),e=r[0],n=r[1],a=A(),o=Object(c.a)(a,2),l=o[0],g=o[1],p=y(e,n,l,g),m=p.handleBoxClick,h=p.checkmate,w=p.chooseFigure,b=p.handleChooseFigure,d=w&&"white"===w.color?{top:0}:{bottom:0};return t.a.createElement("div",{className:s.a.main},h&&"".concat(h," wins"),t.a.createElement(j.a,{classes:{root:s.a.board}},Array.isArray(e)&&e.map(function(i,r){return i.map(function(i,n){return t.a.createElement(f.a,{key:"".concat(r,"_").concat(n),onClick:function(){return m(i,r,n,e)},classes:{root:s.a.square}},t.a.createElement("div",{className:s.a.square,style:{backgroundColor:i.color,backgroundImage:'url("/chessPieces/'.concat(i.figureImg,'")')}},w&&w.i===r&&w.j===n&&t.a.createElement(j.a,{classes:{root:s.a.figures},sx:Object(u.a)({},d,{zIndex:100})},(a=w.color,[{figureImg:"Rook_".concat(a,".png"),figureName:"Rook",figureColor:a},{figureImg:"Horse_".concat(a,".png"),figureName:"Horse",figureColor:a},{figureImg:"Bishop_".concat(a,".png"),figureName:"Bishop",figureColor:a},{figureImg:"Queen_".concat(a,".png"),figureName:"Queen",figureColor:a}]).map(function(i){return t.a.createElement("div",{key:"".concat(r,"_").concat(n,"_").concat(i.figureName),onClick:function(t){t.preventDefault(),t.stopPropagation(),b(i,r,n,e)},className:s.a.squareWithoutBorder},t.a.createElement("div",{className:s.a.square,style:{backgroundColor:i.color,backgroundImage:'url("/chessPieces/'.concat(i.figureImg,'")')}}))}))));var a})})))}var O=function(){return t.a.createElement(N,null)},E=function(i){i&&i instanceof Function&&e.e(3).then(e.bind(null,80)).then(function(r){var e=r.getCLS,n=r.getFID,t=r.getFCP,a=r.getLCP,o=r.getTTFB;e(i),n(i),t(i),a(i),o(i)})};o.a.createRoot(document.getElementById("root")).render(t.a.createElement(t.a.StrictMode,null,t.a.createElement(O,null))),E()}},[[46,1,2]]]);
//# sourceMappingURL=main.002133ae.chunk.js.map